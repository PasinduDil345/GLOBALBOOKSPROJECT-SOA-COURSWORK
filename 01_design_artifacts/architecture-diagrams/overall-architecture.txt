================================================================================
                    GLOBALBOOKS SOA SYSTEM ARCHITECTURE
================================================================================

                              ┌─────────────────┐
                              │   CLIENT/APPS   │
                              │   (Web/Mobile)  │
                              └─────────┬───────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ENTERPRISE SERVICE BUS                           │
│                           (RabbitMQ Message Broker)                        │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SERVICE REGISTRY (UDDI)                          │
│                    Service Discovery & Metadata Repository                 │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                    ORCHESTRATION LAYER                                 │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐         │ │
│  │  │   BPEL Engine   │  │   Camel Routes  │  │ Simple Orchest.│         │ │
│  │  │                 │  │                 │  │                 │         │ │
│  │  │ PlaceOrderProcess│  │  Order Flow    │  │  Direct Calls  │         │ │
│  │  │     .bpel       │  │                 │  │                 │         │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                      BUSINESS SERVICES LAYER                           │ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────┐ │ │
│  │  │                 │  │                 │  │                 │  │     │ │ │
│  │  │  CATALOG        │  │    ORDERS       │  │   PAYMENTS      │  │SHIP.│ │ │
│  │  │  SERVICE        │  │   SERVICE       │  │   SERVICE       │  │SERV.│ │ │
│  │  │                 │  │                 │  │                 │  │     │ │ │
│  │  │ • SOAP/WS       │  │ • REST API      │  │ • REST API      │  │•REST│ │ │
│  │  │ • Book Search   │  │ • Order Mgmt    │  │ • Payment Proc. │  │•Ship│ │ │
│  │  │ • Price Check   │  │ • Order Status  │  │ • Payment Status│  │•Trac│ │ │
│  │  │ • Availability  │  │                 │  │                 │  │     │ │ │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                      SECURITY LAYER                                     │ │
│  │  ┌─────────────────┐  ┌─────────────────┐                              │ │
│  │  │   WS-SECURITY   │  │    OAUTH2       │                              │ │
│  │  │  (SOAP Services)│  │ (REST Services) │                              │ │
│  │  │ • Message       │  │ • JWT Tokens    │                              │ │
│  │  │   Encryption    │  │ • Access Control│                              │ │
│  │  │ • Digital       │  │ • User Auth     │                              │ │
│  │  │   Signatures    │  │                 │                              │ │
│  │  └─────────────────┘  └─────────────────┘                              │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DATA LAYER                                       │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────┐   │
│  │   CATALOG DB    │  │   ORDERS DB     │  │  PAYMENTS DB    │  │SHIP.│   │
│  │  (Books/Prices) │  │ (Order Details) │  │(Payment Records)│  │ DB  │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

================================================================================
                              DEPLOYMENT VIEW
================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                           CONTAINER ORCHESTRATION                          │
│                           (Docker + Kubernetes)                            │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  ┌─────┐     │
│  │   CATALOG       │  │   ORDERS        │  │   PAYMENTS      │  │SHIP.│     │
│  │   CONTAINER     │  │   CONTAINER     │  │   CONTAINER     │  │CONT.│     │
│  │                 │  │                 │  │                 │  │     │     │
│  │ • Port 8080     │  │ • Port 8081     │  │ • Port 8082     │  │•8083│     │
│  │ • Tomcat/JAX-WS │  │ • Spring Boot   │  │ • Spring Boot   │  │•SprB│     │
│  │ • SOAP Services │  │ • REST API      │  │ • REST API      │  │•REST│     │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  └─────┘     │
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐             │
│  │   BPEL          │  │   CAMEL         │  │   RABBITMQ      │             │
│  │   CONTAINER     │  │   CONTAINER     │  │   CONTAINER     │             │
│  │ • Port 8084     │  │ • Port 8085     │  │ • Port 5672     │             │
│  │ • ODE Engine    │  │ • Camel Context │  │ • AMQP Broker   │             │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

================================================================================
                            COMMUNICATION FLOWS
================================================================================

1. CLIENT REQUEST FLOW:
   Client → ESB → Service Registry → Orchestrator → Business Services → Data

2. ORDER PROCESSING WORKFLOW:
   Client Order → Orders Service → Orchestrator (BPEL/Camel)
   ↓
   Orchestrator → Catalog Service (Check Availability)
   ↓
   Orchestrator → Payments Service (Process Payment)
   ↓
   Orchestrator → Shipping Service (Create Shipment)
   ↓
   Response → Client

3. ASYNC EVENT FLOW:
   Service Events → RabbitMQ → Event Consumers → Business Logic

4. SERVICE DISCOVERY:
   Services → UDDI Registry (Register/Publish)
   Clients → UDDI Registry (Lookup) → Service Endpoints

================================================================================
                            SECURITY BOUNDARIES
================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                           EXTERNAL ZONE                                    │
│  (Internet-facing, Load Balancers, API Gateway)                           │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DMZ ZONE                                         │
│  (Service Registry, Orchestration Layer, Message Broker)                  │
└─────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           INTERNAL ZONE                                    │
│  (Business Services, Databases, Internal APIs)                            │
└─────────────────────────────────────────────────────────────────────────────┘

================================================================================
                            MONITORING & LOGGING
================================================================================

• Service Health Checks
• Centralized Logging (ELK Stack)
• Performance Metrics (Prometheus/Grafana)
• Distributed Tracing (Jaeger)
• Alert Management
• Log Aggregation

================================================================================